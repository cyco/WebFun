import { Component } from "src/ui";
import "./onscreen-pad.scss";
import { min, max } from "src/std/math";
import InputMask from "src/engine/input/input-mask";
import { Point, Direction as DirectionHelper } from "src/util";

const BaseSVG = `<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg   xmlns:dc="http://purl.org/dc/elements/1.1/"   xmlns:cc="http://creativecommons.org/ns#"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:svg="http://www.w3.org/2000/svg"   xmlns="http://www.w3.org/2000/svg"   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   height="160"   width="160"   inkscape:version="1.0beta2 (2b71d25, 2019-12-03)"   sodipodi:docname="shadedDark-pad-base.svg"   id="svg1216"   version="1.1"><metadata     id="metadata1220"><rdf:RDF><cc:Work         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><sodipodi:namedview     inkscape:current-layer="svg1216"     inkscape:window-maximized="0"     inkscape:window-y="23"     inkscape:window-x="67"     inkscape:cy="87.216784"     inkscape:cx="279.21489"     inkscape:zoom="1.43"     showgrid="false"     id="namedview1218"     inkscape:window-height="730"     inkscape:window-width="1852"     inkscape:pageshadow="2"     inkscape:pageopacity="0"     guidetolerance="10"     gridtolerance="10"     objecttolerance="10"     borderopacity="1"     inkscape:document-rotation="0"     bordercolor="#666666"     pagecolor="#ffffff" /><defs     id="defs986"><linearGradient       id="gradient0"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,44,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop721"         stop-color="#383838"         offset="0" /><stop         id="stop723"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient1"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,104,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop726"         stop-color="#383838"         offset="0" /><stop         id="stop728"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient2"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,164,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop731"         stop-color="#383838"         offset="0" /><stop         id="stop733"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient3"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,224,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop736"         stop-color="#383838"         offset="0" /><stop         id="stop738"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient4"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,284,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop741"         stop-color="#383838"         offset="0" /><stop         id="stop743"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient5"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,344,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop746"         stop-color="#383838"         offset="0" /><stop         id="stop748"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient6"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,44,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop751"         stop-color="#383838"         offset="0" /><stop         id="stop753"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient7"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,104,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop756"         stop-color="#383838"         offset="0" /><stop         id="stop758"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient8"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,164,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop761"         stop-color="#383838"         offset="0" /><stop         id="stop763"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient9"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,224,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop766"         stop-color="#383838"         offset="0" /><stop         id="stop768"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient10"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,284,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop771"         stop-color="#383838"         offset="0" /><stop         id="stop773"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient11"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,344,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop776"         stop-color="#383838"         offset="0" /><stop         id="stop778"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient12"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,44,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop781"         stop-color="#383838"         offset="0" /><stop         id="stop783"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient13"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,104,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop786"         stop-color="#383838"         offset="0" /><stop         id="stop788"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient14"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,164,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop791"         stop-color="#383838"         offset="0" /><stop         id="stop793"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient15"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,224,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop796"         stop-color="#383838"         offset="0" /><stop         id="stop798"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient16"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,284,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop801"         stop-color="#383838"         offset="0" /><stop         id="stop803"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient17"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,344,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop806"         stop-color="#383838"         offset="0" /><stop         id="stop808"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient18"       gradientTransform="matrix(0,-0.02935791,0.02929688,0,314,574)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop811"         stop-color="#383838"         offset="0" /><stop         id="stop813"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient19"       gradientTransform="matrix(0,-0.02935791,0.02929688,0,194,574)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop816"         stop-color="#383838"         offset="0" /><stop         id="stop818"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient20"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,700,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop821"         stop-color="#383838"         offset="0" /><stop         id="stop823"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient21"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,610,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop826"         stop-color="#383838"         offset="0" /><stop         id="stop828"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient22"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,520,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop831"         stop-color="#383838"         offset="0" /><stop         id="stop833"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient23"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,430,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop836"         stop-color="#383838"         offset="0" /><stop         id="stop838"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient24"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,880,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop841"         stop-color="#383838"         offset="0" /><stop         id="stop843"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient25"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,790,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop846"         stop-color="#383838"         offset="0" /><stop         id="stop848"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient26"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,700,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop851"         stop-color="#383838"         offset="0" /><stop         id="stop853"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient27"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,610,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop856"         stop-color="#383838"         offset="0" /><stop         id="stop858"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient28"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,520,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop861"         stop-color="#383838"         offset="0" /><stop         id="stop863"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient29"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,430,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop866"         stop-color="#383838"         offset="0" /><stop         id="stop868"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient30"       gradientTransform="matrix(0,-0.09765625,0.09765625,0,279.95,240)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop871"         stop-color="#383838"         offset="0" /><stop         id="stop873"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient31"       gradientTransform="matrix(0.04142761,-0.04142761,0.04142761,0.04142761,279.95,70)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop876"         stop-color="#383838"         offset="0" /><stop         id="stop878"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient32"       gradientTransform="matrix(0,-0.05493164,0.05493164,0,279.95,70)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop881"         stop-color="#434343"         offset="0.00392156862745098" /><stop         id="stop883"         stop-color="#2C2C2C"         offset="1" /></linearGradient><linearGradient       id="gradient33"       gradientTransform="matrix(0,-0.09762573,0.09762573,0,459.95,239.95)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop886"         stop-color="#383838"         offset="0" /><stop         id="stop888"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient34"       gradientTransform="matrix(0,-0.02935791,0.02929688,0,74,574)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop891"         stop-color="#383838"         offset="0" /><stop         id="stop893"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient35"       gradientTransform="matrix(0,-0.09765625,0.09765625,0,840,240)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop896"         stop-color="#383838"         offset="0" /><stop         id="stop898"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient36"       gradientTransform="matrix(0.05392456,-0.05392456,0.05392456,0.05392456,839.45,70.45)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop901"         stop-color="#383838"         offset="0" /><stop         id="stop903"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient37"       gradientTransform="matrix(0,-0.07260132,0.07260132,0,839.4,70.5)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop906"         stop-color="#434343"         offset="0.00392156862745098" /><stop         id="stop908"         stop-color="#2C2C2C"         offset="1" /></linearGradient><linearGradient       id="gradient38"       gradientTransform="matrix(0,-0.04608154,0.04608154,0,650.5,117.75)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop911"         stop-color="#383838"         offset="0" /><stop         id="stop913"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient39"       gradientTransform="matrix(0,-0.0378418,0.03723145,0,692.7,200.5)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop916"         stop-color="#383838"         offset="0" /><stop         id="stop918"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient40"       gradientTransform="matrix(0,-0.0447998,0.04544067,0,650.5,282.7)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop921"         stop-color="#383838"         offset="0" /><stop         id="stop923"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient41"       gradientTransform="matrix(0,-0.03723145,0.03723145,0,607.75,200.5)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop926"         stop-color="#383838"         offset="0" /><stop         id="stop928"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient42"       gradientTransform="matrix(0,-0.09765625,0.09765625,0,100,240)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop931"         stop-color="#383838"         offset="0" /><stop         id="stop933"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient43"       gradientTransform="matrix(0,-0.05267334,0.05264282,0,100.05,70.05)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop936"         stop-color="#434343"         offset="0.00392156862745098" /><stop         id="stop938"         stop-color="#2C2C2C"         offset="1" /></linearGradient><linearGradient       id="gradient44"       gradientTransform="matrix(0.04142761,-0.04142761,0.04142761,0.04142761,100.1,70.15)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop941"         stop-color="#383838"         offset="0" /><stop         id="stop943"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient45"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,880,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop946"         stop-color="#383838"         offset="0" /><stop         id="stop948"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient46"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,790,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop951"         stop-color="#383838"         offset="0" /><stop         id="stop953"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient47"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,700,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop956"         stop-color="#383838"         offset="0" /><stop         id="stop958"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient48"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,610,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop961"         stop-color="#383838"         offset="0" /><stop         id="stop963"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient49"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,520,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop966"         stop-color="#383838"         offset="0" /><stop         id="stop968"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient50"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,880,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop971"         stop-color="#383838"         offset="0" /><stop         id="stop973"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient51"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,790,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop976"         stop-color="#383838"         offset="0" /><stop         id="stop978"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       id="gradient52"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,430,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse"><stop         id="stop981"         stop-color="#383838"         offset="0" /><stop         id="stop983"         stop-color="#585858"         offset="1" /></linearGradient><linearGradient       gradientUnits="userSpaceOnUse"       x1="-819.20001"       x2="819.20001"       spreadMethod="pad"       gradientTransform="matrix(0,-0.05267334,0.05264282,0,-2.050001,-2.099999)"       id="gradient43-5"><stop         offset="0.00392156862745098"         stop-color="#434343"         id="stop936-5" /><stop         offset="1"         stop-color="#2C2C2C"         id="stop938-4" /></linearGradient><linearGradient       gradientUnits="userSpaceOnUse"       x1="-819.20001"       x2="819.20001"       spreadMethod="pad"       gradientTransform="matrix(0.04142761,-0.04142761,0.04142761,0.04142761,-2.000001,-1.999999)"       id="gradient44-1"><stop         offset="0"         stop-color="#383838"         id="stop941-8" /><stop         offset="1"         stop-color="#585858"         id="stop943-8" /></linearGradient><linearGradient       gradientUnits="userSpaceOnUse"       x1="-819.20001"       x2="819.20001"       spreadMethod="pad"       gradientTransform="matrix(0,-0.09765625,0.09765625,0,0,3e-6)"       id="gradient42-8"><stop         offset="0"         stop-color="#383838"         id="stop931-2" /><stop         offset="1"         stop-color="#585858"         id="stop933-0" /></linearGradient><linearGradient       gradientUnits="userSpaceOnUse"       x1="-819.20001"       x2="819.20001"       spreadMethod="pad"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,790,560)"       id="gradient51-1"><stop         offset="0"         stop-color="#383838"         id="stop976-8" /><stop         offset="1"         stop-color="#585858"         id="stop978-8" /></linearGradient></defs><g     transform="translate(80,80)"     id="pad-base"><path       id="path1158"       d="M 52.999997,-53.049997 Q 31.049997,-75 0,-75 q -31.25,0 -53.15,21.950003 -21.85,22 -21.85,53.05 0,31.05 21.85,53 21.95,22 53.15,22 30.999997,0 52.949997,-22 l 0.05,-0.05 q 22,-21.95 22,-52.95 0,-31.05 -22,-53.05 m 3.5,-3.55 q 23.5,23.5 23.5,56.6 0,33.1 -23.5,56.5 -23.4,23.5 -56.499997,23.5 -33.3,0 -56.7,-23.5 -23.3,-23.4 -23.3,-56.5 0,-33.1 23.3,-56.6 Q -33.3,-80 0,-80 q 33.099997,0 56.499997,23.400003"       fill="url(#gradient42)"       stroke="none"       inkscape:connector-curvature="0"       style="fill:url(#gradient42-8)" /><path       id="path1160"       d="m 52.999997,-53.049997 q 22,22 22,53.05 0,31 -22,52.95 l -0.05,0.05 q -21.95,22 -52.949997,22 -31.2,0 -53.15,-22 -21.85,-21.95 -21.85,-53 0,-31.05 21.85,-53.05 Q -31.25,-75 0,-75 q 31.049997,0 52.999997,21.950003"       fill="#383838"       stroke="none"       inkscape:connector-curvature="0" /><path       id="path1162"       d="m 0,-64.949997 q 0.35,0 0.65,0.3 l 5.05,5.05 q 0.45,0.45 0.2,1.05 -0.25,0.6 -0.9,0.6 H -5.05 q -0.65,0 -0.9,-0.6 l -0.05,-0.4 q -0.05,-0.35 0.25,-0.65 h 0.05 l 5,-5.05 q 0.3,-0.3 0.7,-0.3 m 59.499997,61.5 q 0,-0.65 0.6,-0.9 0.6,-0.25 1.05,0.2 l 5.05,5.05 0.3,0.65 -0.3,0.7 -5.05,5 v 0.05 l -0.65,0.25 -0.4,-0.05 q -0.6,-0.25 -0.6,-0.9 v -10.05 m -118.999997,0 v 10.05 q 0,0.65 -0.6,0.9 l -0.4,0.05 q -0.35,0.05 -0.65,-0.25 v -0.05 l -5.05,-5 q -0.3,-0.3 -0.3,-0.7 0,-0.35 0.3,-0.65 l 5.05,-5.05 q 0.45,-0.45 1.05,-0.2 0.6,0.25 0.6,0.9 m 65.4,65.1 q 0.25,0.6 -0.2,1.05 l -5.05,5.05 -0.65,0.3 -0.7,-0.3 -5,-5.05 h -0.05 q -0.3,-0.3 -0.25,-0.65 l 0.05,-0.4 q 0.25,-0.6 0.9,-0.6 H 5 q 0.65,0 0.9,0.6"       fill-opacity="0.050980392156862744"       fill="#FFFFFF"       stroke="none"       inkscape:connector-curvature="0" /></g></svg>`;
const PadSVG = `<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg   xmlns:dc="http://purl.org/dc/elements/1.1/"   xmlns:cc="http://creativecommons.org/ns#"   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"   xmlns:svg="http://www.w3.org/2000/svg"   xmlns="http://www.w3.org/2000/svg"   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   height="100"   width="100"   inkscape:version="1.0beta2 (2b71d25, 2019-12-03)"   sodipodi:docname="shadedDark-padthumb.svg"   id="svg1216"   version="1.1">  <metadata     id="metadata1220">    <rdf:RDF>      <cc:Work         rdf:about="">        <dc:format>image/svg+xml</dc:format>        <dc:type           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />        <dc:title></dc:title>      </cc:Work>    </rdf:RDF>  </metadata>  <sodipodi:namedview     inkscape:current-layer="svg1216"     inkscape:window-maximized="0"     inkscape:window-y="23"     inkscape:window-x="67"     inkscape:cy="87.216784"     inkscape:cx="279.21489"     inkscape:zoom="1.43"     showgrid="false"     id="namedview1218"     inkscape:window-height="730"     inkscape:window-width="1852"     inkscape:pageshadow="2"     inkscape:pageopacity="0"     guidetolerance="10"     gridtolerance="10"     objecttolerance="10"     borderopacity="1"     inkscape:document-rotation="0"     bordercolor="#666666"     pagecolor="#ffffff" />  <defs     id="defs986">    <linearGradient       id="gradient0"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,44,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop721"         stop-color="#383838"         offset="0" />      <stop         id="stop723"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient1"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,104,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop726"         stop-color="#383838"         offset="0" />      <stop         id="stop728"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient2"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,164,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop731"         stop-color="#383838"         offset="0" />      <stop         id="stop733"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient3"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,224,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop736"         stop-color="#383838"         offset="0" />      <stop         id="stop738"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient4"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,284,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop741"         stop-color="#383838"         offset="0" />      <stop         id="stop743"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient5"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,344,484)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop746"         stop-color="#383838"         offset="0" />      <stop         id="stop748"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient6"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,44,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop751"         stop-color="#383838"         offset="0" />      <stop         id="stop753"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient7"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,104,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop756"         stop-color="#383838"         offset="0" />      <stop         id="stop758"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient8"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,164,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop761"         stop-color="#383838"         offset="0" />      <stop         id="stop763"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient9"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,224,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop766"         stop-color="#383838"         offset="0" />      <stop         id="stop768"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient10"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,284,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop771"         stop-color="#383838"         offset="0" />      <stop         id="stop773"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient11"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,344,424)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop776"         stop-color="#383838"         offset="0" />      <stop         id="stop778"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient12"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,44,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop781"         stop-color="#383838"         offset="0" />      <stop         id="stop783"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient13"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,104,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop786"         stop-color="#383838"         offset="0" />      <stop         id="stop788"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient14"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,164,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop791"         stop-color="#383838"         offset="0" />      <stop         id="stop793"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient15"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,224,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop796"         stop-color="#383838"         offset="0" />      <stop         id="stop798"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient16"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,284,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop801"         stop-color="#383838"         offset="0" />      <stop         id="stop803"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient17"       gradientTransform="matrix(0,-0.02929688,0.02929688,0,344,364)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop806"         stop-color="#383838"         offset="0" />      <stop         id="stop808"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient18"       gradientTransform="matrix(0,-0.02935791,0.02929688,0,314,574)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop811"         stop-color="#383838"         offset="0" />      <stop         id="stop813"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient19"       gradientTransform="matrix(0,-0.02935791,0.02929688,0,194,574)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop816"         stop-color="#383838"         offset="0" />      <stop         id="stop818"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient20"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,700,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop821"         stop-color="#383838"         offset="0" />      <stop         id="stop823"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient21"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,610,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop826"         stop-color="#383838"         offset="0" />      <stop         id="stop828"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient22"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,520,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop831"         stop-color="#383838"         offset="0" />      <stop         id="stop833"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient23"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,430,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop836"         stop-color="#383838"         offset="0" />      <stop         id="stop838"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient24"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,880,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop841"         stop-color="#383838"         offset="0" />      <stop         id="stop843"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient25"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,790,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop846"         stop-color="#383838"         offset="0" />      <stop         id="stop848"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient26"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,700,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop851"         stop-color="#383838"         offset="0" />      <stop         id="stop853"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient27"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,610,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop856"         stop-color="#383838"         offset="0" />      <stop         id="stop858"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient28"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,520,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop861"         stop-color="#383838"         offset="0" />      <stop         id="stop863"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient29"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,430,380)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop866"         stop-color="#383838"         offset="0" />      <stop         id="stop868"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient30"       gradientTransform="matrix(0,-0.09765625,0.09765625,0,279.95,240)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop871"         stop-color="#383838"         offset="0" />      <stop         id="stop873"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient31"       gradientTransform="matrix(0.04142761,-0.04142761,0.04142761,0.04142761,279.95,70)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop876"         stop-color="#383838"         offset="0" />      <stop         id="stop878"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient32"       gradientTransform="matrix(0,-0.05493164,0.05493164,0,279.95,70)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop881"         stop-color="#434343"         offset="0.00392156862745098" />      <stop         id="stop883"         stop-color="#2C2C2C"         offset="1" />    </linearGradient>    <linearGradient       id="gradient33"       gradientTransform="matrix(0,-0.09762573,0.09762573,0,459.95,239.95)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop886"         stop-color="#383838"         offset="0" />      <stop         id="stop888"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient34"       gradientTransform="matrix(0,-0.02935791,0.02929688,0,74,574)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop891"         stop-color="#383838"         offset="0" />      <stop         id="stop893"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient35"       gradientTransform="matrix(0,-0.09765625,0.09765625,0,840,240)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop896"         stop-color="#383838"         offset="0" />      <stop         id="stop898"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient36"       gradientTransform="matrix(0.05392456,-0.05392456,0.05392456,0.05392456,839.45,70.45)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop901"         stop-color="#383838"         offset="0" />      <stop         id="stop903"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient37"       gradientTransform="matrix(0,-0.07260132,0.07260132,0,839.4,70.5)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop906"         stop-color="#434343"         offset="0.00392156862745098" />      <stop         id="stop908"         stop-color="#2C2C2C"         offset="1" />    </linearGradient>    <linearGradient       id="gradient38"       gradientTransform="matrix(0,-0.04608154,0.04608154,0,650.5,117.75)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop911"         stop-color="#383838"         offset="0" />      <stop         id="stop913"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient39"       gradientTransform="matrix(0,-0.0378418,0.03723145,0,692.7,200.5)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop916"         stop-color="#383838"         offset="0" />      <stop         id="stop918"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient40"       gradientTransform="matrix(0,-0.0447998,0.04544067,0,650.5,282.7)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop921"         stop-color="#383838"         offset="0" />      <stop         id="stop923"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient41"       gradientTransform="matrix(0,-0.03723145,0.03723145,0,607.75,200.5)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop926"         stop-color="#383838"         offset="0" />      <stop         id="stop928"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient42"       gradientTransform="matrix(0,-0.09765625,0.09765625,0,100,240)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop931"         stop-color="#383838"         offset="0" />      <stop         id="stop933"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient43"       gradientTransform="matrix(0,-0.05267334,0.05264282,0,100.05,70.05)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop936"         stop-color="#434343"         offset="0.00392156862745098" />      <stop         id="stop938"         stop-color="#2C2C2C"         offset="1" />    </linearGradient>    <linearGradient       id="gradient44"       gradientTransform="matrix(0.04142761,-0.04142761,0.04142761,0.04142761,100.1,70.15)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop941"         stop-color="#383838"         offset="0" />      <stop         id="stop943"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient45"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,880,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop946"         stop-color="#383838"         offset="0" />      <stop         id="stop948"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient46"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,790,470)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop951"         stop-color="#383838"         offset="0" />      <stop         id="stop953"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient47"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,700,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop956"         stop-color="#383838"         offset="0" />      <stop         id="stop958"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient48"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,610,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop961"         stop-color="#383838"         offset="0" />      <stop         id="stop963"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient49"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,520,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop966"         stop-color="#383838"         offset="0" />      <stop         id="stop968"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient50"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,880,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop971"         stop-color="#383838"         offset="0" />      <stop         id="stop973"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient51"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,790,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop976"         stop-color="#383838"         offset="0" />      <stop         id="stop978"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       id="gradient52"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,430,560)"       spreadMethod="pad"       x2="819.20001"       x1="-819.20001"       gradientUnits="userSpaceOnUse">      <stop         id="stop981"         stop-color="#383838"         offset="0" />      <stop         id="stop983"         stop-color="#585858"         offset="1" />    </linearGradient>    <linearGradient       gradientUnits="userSpaceOnUse"       x1="-819.20001"       x2="819.20001"       spreadMethod="pad"       gradientTransform="matrix(0,-0.05267334,0.05264282,0,-2.050001,-2.099999)"       id="gradient43-5">      <stop         offset="0.00392156862745098"         stop-color="#434343"         id="stop936-5" />      <stop         offset="1"         stop-color="#2C2C2C"         id="stop938-4" />    </linearGradient>    <linearGradient       gradientUnits="userSpaceOnUse"       x1="-819.20001"       x2="819.20001"       spreadMethod="pad"       gradientTransform="matrix(0.04142761,-0.04142761,0.04142761,0.04142761,-2.000001,-1.999999)"       id="gradient44-1">      <stop         offset="0"         stop-color="#383838"         id="stop941-8" />      <stop         offset="1"         stop-color="#585858"         id="stop943-8" />    </linearGradient>    <linearGradient       gradientUnits="userSpaceOnUse"       x1="-819.20001"       x2="819.20001"       spreadMethod="pad"       gradientTransform="matrix(0,-0.09765625,0.09765625,0,0,3e-6)"       id="gradient42-8">      <stop         offset="0"         stop-color="#383838"         id="stop931-2" />      <stop         offset="1"         stop-color="#585858"         id="stop933-0" />    </linearGradient>    <linearGradient       gradientUnits="userSpaceOnUse"       x1="-819.20001"       x2="819.20001"       spreadMethod="pad"       gradientTransform="matrix(0,-0.04882812,0.04882812,0,790,560)"       id="gradient51-1">      <stop         offset="0"         stop-color="#383838"         id="stop976-8" />      <stop         offset="1"         stop-color="#585858"         id="stop978-8" />    </linearGradient>  </defs>  <g     transform="translate(50,50)"     id="pad-thumb">    <path       id="path1164"       d="m -36.35,24.200001 q -5.15,-6.55 -7.3,-14.35 -1.15,-4.2 -1.45,-8.75 l -0.1,-3.1 q 0.05,-17.9 12.65,-30.550001 l 3.549999,-3.25 q 5.4,-4.4 11.65,-6.75 5.4,-2 11.35,-2.5 l 4,-0.15 q 16.9,0.05 29.15,11.3 l 1.25,1.2 0.15,0.15 q 9.45,9.450001 11.8,21.850001 0.65,3.55 0.75,7.35 v 1.2 1 q -0.35,17.2 -12.7,29.5 -12.65,12.7 -30.5,12.7 l -4.75,-0.2 q -6.95,-0.7 -13.05,-3.45 -5.2,-2.4 -9.75,-6.25 l -2.949999,-2.75 -3.75,-4.2"       fill="url(#gradient43)"       stroke="none"       inkscape:connector-curvature="0"       style="fill:url(#gradient43-5)" />    <path       id="path1166"       d="m -36.35,24.200001 q 1.7,2.25 3.75,4.3 12.599999,12.7 30.649999,12.7 l 3.45,-0.1 q 5,-0.4 9.65,-1.85 7.25,-2.25 13.35,-7.15 l 4,-3.6 q 11.45,-11.5 12.6,-27.15 v -0.35 -0.15 l 0.05,-0.4 0.05,-1.5 v -0.95 q 0,-4.55 -0.85,-8.7 -2.35,-12.4 -11.8,-21.850001 l -0.15,-0.15 -1.25,-1.2 q -12.25,-11.25 -29.15,-11.3 l -4,0.15 q -5.95,0.5 -11.35,2.5 -6.25,2.35 -11.65,6.75 L -32.55,-32.55 q -12.6,12.650001 -12.65,30.550001 l 0.1,3.1 q 0.3,4.55 1.45,8.75 2.15,7.8 7.3,14.35 m -13.6,-24.5 -0.05,-0.7 v -1 q 0,-19.8 14,-34.000001 13.999999,-14 33.999999,-14 19.8,0 33.85,14 14.1,14.150001 14.15,34.000001 v 1 0.7 q -0.65,18.75 -14.1,32.2 -14.1,14.1 -33.9,14.1 -20,0 -33.999999,-14.1 -13.4,-13.5 -13.95,-32.2"       fill="url(#gradient44)"       stroke="none"       inkscape:connector-curvature="0"       style="fill:url(#gradient44-1)" />    <path       id="path1168"       d="m 41.099999,-1.149999 v -1 -1.2 l 0.1,2.3 -0.05,1.5 -0.05,-0.6 v -0.2 -0.8"       fill-opacity="0.30196078431372547"       fill="#000000"       stroke="none"       inkscape:connector-curvature="0" />    <path       id="path1170"       d="m 41.099999,-1.149999 v 0.8 0.2 0.65 0.35 0.15 0.35 q -1.15,15.65 -12.6,27.15 l -4,3.6 q -6.1,4.9 -13.35,7.15 -4.65,1.45 -9.65,1.85 l -3.45,0.1 q -18.05,0 -30.649999,-12.7 -2.05,-2.05 -3.75,-4.3 l 3.75,4.2 2.949999,2.75 q 4.55,3.85 9.75,6.25 6.1,2.75 13.05,3.45 l 4.75,0.2 q 17.85,0 30.5,-12.7 12.35,-12.3 12.7,-29.5 m 0,-2.2 q -0.1,-3.8 -0.75,-7.35 0.85,4.15 0.85,8.7 v 0.95 l -0.1,-2.3"       fill-opacity="0.2"       fill="#000000"       stroke="none"       inkscape:connector-curvature="0" />    <path       id="path1172"       d="m 45.999999,-0.299999 v 1.3 1 q -0.4,19.2 -14.1,32.9 -14.1,14.1 -33.9,14.1 -20,0 -33.999999,-14.1 -13.65,-13.75 -14,-32.9 v -1 l 0.05,-1.3 q 0.55,18.7 13.95,32.2 13.999999,14.1 33.999999,14.1 19.8,0 33.9,-14.1 13.45,-13.45 14.1,-32.2"       fill-opacity="0.10196078431372549"       fill="#000000"       stroke="none"       inkscape:connector-curvature="0" />    <path       id="path1174"       d="m -2.100001,-37.15 q 1.6,0 2.8,1.15 1,1 1.2,2.35 v 0.5 q 0,1.6 -1.2,2.8 -1.2,1.200001 -2.8,1.200001 -1.65,0 -2.85,-1.200001 -1.15,-1.2 -1.15,-2.8 l 0.05,-0.5 q 0.15,-1.35 1.1,-2.35 1.2,-1.15 2.85,-1.15 m 2.8,63.150001 q 1,1 1.2,2.35 v 0.5 q 0,1.6 -1.2,2.8 -1.2,1.2 -2.8,1.2 -1.65,0 -2.85,-1.2 -1.15,-1.2 -1.15,-2.8 l 0.05,-0.5 q 0.15,-1.35 1.1,-2.35 1.2,-1.15 2.85,-1.15 1.6,0 2.8,1.15 m 25.4,-31 q 1.2,-1.15 2.8,-1.15 1.65,0 2.85,1.15 0.95,1 1.15,2.35 v 0.5 q 0,1.6 -1.15,2.8 -1.2,1.2 -2.85,1.2 -1.6,0 -2.8,-1.2 -1.2,-1.2 -1.2,-2.8 l 0.05,-0.5 q 0.15,-1.35 1.15,-2.35 m -61.999999,0 q 1.2,-1.15 2.8,-1.15 1.65,0 2.849999,1.15 0.95,1 1.15,2.35 v 0.5 q 0,1.6 -1.15,2.8 -1.199999,1.2 -2.849999,1.2 -1.6,0 -2.8,-1.2 -1.2,-1.2 -1.2,-2.8 l 0.05,-0.5 q 0.15,-1.35 1.15,-2.35"       fill="#666666"       stroke="none"       inkscape:connector-curvature="0" />  </g></svg>`;

const r = (t: string): SVGSVGElement => {
	const d = <div></div>;
	d.innerHTML = t;
	return d.firstElementChild as SVGSVGElement;
};
const px = (n: number) => n.toString() + "px";

const ThumbOffsetMax = 70;
const PadBaseRadius = 80;

class OnscreenPad extends Component implements EventListenerObject {
	public static readonly tagName = "wf-onscreen-pad";
	private _base: SVGSVGElement = r(BaseSVG);
	private _thumb: SVGSVGElement = r(PadSVG);
	private _input: InputMask = InputMask.None;

	connectedCallback() {
		super.connectedCallback();

		this.positionThumb(0, 0);

		this.appendChild(this._base);
		this.appendChild(this._thumb);

		this.addEventListener("touchstart", this);
		this.addEventListener("touchmove", this);
		this.addEventListener("touchend", this);
	}

	handleEvent(event: TouchEvent): void {
		if (event.type === "touchend") {
			this.positionThumb(0, 0);
		} else {
			const touch = event.touches[0];
			const box = this.getBoundingClientRect();
			const centerX = box.left + box.width / 2;
			const centerY = box.top + box.height / 2;

			const x = (touch.clientX - centerX) / 80;
			const y = (touch.clientY - centerY) / 80;

			this.positionThumb(x, y);
		}

		event.preventDefault();
		event.stopPropagation();
	}

	private positionThumb(x: number, y: number) {
		// TODO: Limit to circle instead of a rectangle
		x = max(min(x, 1), -1);
		y = max(min(y, 1), -1);

		let input: InputMask;
		const distance = this._distanceFromPoint(x, y);

		if (distance > 0.7) input |= InputMask.Walk;
		input |= this._directionInputFromAngle(x, y);

		this._input = input;

		this._thumb.style.left = px(PadBaseRadius + x * ThumbOffsetMax);
		this._thumb.style.top = px(PadBaseRadius + y * ThumbOffsetMax);
	}

	disconnectedCallback() {
		this.removeEventListener("touchstart", this);
		this.removeEventListener("touchmove", this);
		this.removeEventListener("touchend", this);

		super.disconnectedCallback();
	}

	private _directionInputFromAngle(x: number, y: number): number {
		let result = InputMask.None;

		if (x < -this.deadZone) result |= InputMask.Left;
		if (x > this.deadZone) result |= InputMask.Right;
		if (y < -this.deadZone) result |= InputMask.Up;
		if (y > this.deadZone) result |= InputMask.Down;

		return result;
	}

	private _distanceFromPoint(x: number, y: number): number {
		return new Point(0, 0).distanceTo(new Point(x, y));
	}

	private get deadZone() {
		return 0.4;
	}

	public get input(): InputMask {
		return this._input;
	}
}

export default OnscreenPad;
